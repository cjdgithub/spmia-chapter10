language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - "$NTFCN_EMAIL"
  on_success: always
  on_failure: always
branches:
  only:
  - master
  - cjdgithub
env:
  global:
  - secure: dnIUVlSSR94amNS3/nbvNneg8EqMAZSq5Yfs1nLCQ/24ki6EavzbG2VDkOucD7HNR57t7qw5XTXZ3Rk625HVWrg/aak3K6+M3B9aBdKCYC8JOBXoUrza/h1Fqg1vozdoKPEiC9+rm4as/JW0tZHBifCJdQJqIm5UfBvhLQRmjW/6SKNowkjR+ABS1LQawQfTIUQB1QaCgTCNTnGqB/+zWAdaWuDcGj2tZSCEeHq8YnZzawFHsuuFjgiWtpseKJ71dBWdfpOUqedFRVgzqbQuPvSpkFzzrkpy795jAvzeCiVLQ0RoHbfw1eE0OgDqflOzUO4CgfacpNznzO5ZmM44KrXS6hJoeTpD5GUebxfLZldn14dEJ0vYIgwyU/tmV4BKwpSxsXOqkPdrTsRhd7iKEVUD4ZyJSM+RHdci0qvizAqFVjz5+IlhemGQ7p6plCzQmCQExnTZ54L9mZmaJk1vsz3xvIFCp0/bDy5rgCZq8D7asIdMJIZ1+AgSFdIeKE0c/WqY+s/CVWv163yVzWaJA91MWconRlPD6zS4+UmJR9UmUNygNkxGOAtA+LmJwgEg27v2VjIsk+gdVqhRIosu03Nqm0SFb/q0Lq5lEPjTfHKk33+kd2OB/cIrgS8s74y0hnQoulGyp7pXFo7vETa3kTq/uylrTI+E45lww/EeCeA=
  - secure: VhA7KThdggZkDwx9tjrpx0Li3slRZN7pQVE2rM1hAb7JVp7K1bAsSmGSSG2YjsVKXpeqmW75ChAI+wkm5bFoeNMU+jP2tSTcXETQ4V6khfPmFkxionq0KDJ6m6xfIY/arfheW3mNZ1UheZJvWgz/5a4qwaqdZ8KCPu2ItEH4nyd+o4s8jJxB6Gk5aYvcEa3JJP9/Ii6HPt+389m0uJX9V+X+UlUQ7koEh9mWNHAMmg0jsyePkQQyVFUwrcg6j96RTM9Pw5vqC126X5DcAIqYrmobcwXxAKrt+t9/Lc8t9HyJCBTK/6WizDD8a0obBfgZdFe8hWSCMfHuKVpE8/qD0+ilRapaoC01Knlk6Hg+3srlhqayk+zyktCsC8vBbCu16qPDc8uwKrqVS2oxE1CUcPtAhWsghqiSoC4XGpsC25OX7zlf8Vpi+9dMidVfWBotfli5IXT2eIXzG7tywtj+4NbJ0A0qTiJHHiNWg8eW7jBsCpN3nA9qd/E+2In0Q9CtubO5GO8oqIZB6QT+gezd1d135T+ZjNOyyn4phCM9lUwrf3zUu9jUPUdD2BBeZWWeA7Ua7IxbCAVr507ZBfgIEwUww9wfieuz6vh+9AHefwii7f0DGlhZBuU2pwOzobHU9bLuVu32tt1NJe9w/XOmZEDmmDrR9We3H8vjJ/Gbe7A=
  - secure: JhcBurYHgkSBPIpSuNoBmuaJCFbxekgq3vnvmOP/+Nyd12c7zbC8Tb/x/Gtr4kE69Pr0P4p6OF1wtNjpYVWAc4p+TWZ527t1vQyzOQfG64ve1ZbVNYHZSaRDHT3DrfKYdqdEbV+1wu6mQIXyhDHINbZNv5nCCZOh6ikwyX9O1wLMYnvd7SzA+OgmCiZqg4H0zrS1C0jIXZqgLCxdrsv7KG8a/a0UmLTHpTmS6O7dlOBgIvj4bkgT4nswVBzaJ1jlAYwGgLw0lH24TV3efB6LSY9V4iSlX6Yh9xjVEwR3Rflq+yn7Q+mQp0a5Ct8lbJ6BWG4y45GzrAbLTcM94Rs4hsmqAqCk5xA30BJ/3mKQw59SdbgyExm40v1cryfNPp4FhNeWyIm5QWeVVSI/2M9WPtYLKGa3COmdpGvFEBH3ypkBQPqUhVSQeVEn72taU8JC22LQIZ0GozGWBu9714L96Yw/xghoozqOcuM1HJtxywCZvfXyfZe4Fux++d93xXkdP8h50CKgpRbT7p0T/z8Acsx4WpCN0puc7sxw7jdX8YWLEA1HX3AEq6ciqLez0iFG9tnzIL8GeMUjxrL4zjRjE3om3sjZlvDOILrBDqRxeSeo1svqkpmTbZpmEgo+Ws3cNF6Ya/V3p2fzybFLMvOZSJB+vVtHAfuKCqYDEtR99Sw=
  - secure: FCVOU3lYPMm0DR+CugCvDxpjKAq0/VxaUvtvzvVWZgfSJiDX4om2xwP12iNKnq6LogA+28HXhCBO5SeD4Hcg5a0qhxqwvKzMIyg7/97y7gwTpfLBAk5NNkQ4hK2mMfPrZmeEto4jvrjuBZkMntZtX1eE+qHBcg1/mZ8U9+gmBejwjieFH0gqcJkgUUf8upCd1kOc6uMYzEitOvPHIY7csNHjyFHXoVDluNh6YNGtWo7ZKT5V198uZCqbFzTwlx2opRXaQKrTsziOPXiZxKMHBmtaCbcn0BbC46JtvUIZSrlIlAzrEFUgNx/sVrwNGXeQqHT4sS6zCCFg8Cm0c9Jsvao7tBYdd8/NEdnunnAu22I14Y1sloZ1zZZl8ixopcA7j7deK9E1AYvNQ0LdVB6BIWh9DQ4YaZ3/wb57iv6T+anxnwClbTRoWS6taGJE+zxZF/I9LVZmI/mow3Ez4Luwxb1WWX9Iy6n6MUwdw30+XvemCEq382x3xJZ7LfygLaDiHCG8qcKKCR93cO/1iToheIFgpL17bZS+w/zROEAeJcSiRiJEhTqHaRMPpEYjXzLdBPH9+DirkCzrqjOWus+fpRimDqEMIAbAjL/a3nqUkiRGs8TZhZ2ihfd2LY//keAowg8e6AvCoU2xZ0usMYIfsxvEJYwCQUtVMfB3jwsvNvc=
  - secure: cXTh84LdnSp9TbVmGZLx/LV3G7O1+MnjnhRGgGK6FIhso6CiqoJB9L4H77ta7S9aen9/Q7hvVRFWIh4VwbkJcs+a0yfHc8TvwDCLcMA/sjfoXTGN4MI/8EESt3xESxYZndGdSxtHq3Z8v0B7izx48CGOlLYUq0bmg9onJnftqM/IKN7cRsRUtVb2ayB72JJdAE4m3aahDVVlSm/jxWxZOcfc3yQ4T+EFeSJlhciygx9M39yLFnY+bsu90YbIQiDrMtrCthPZGyuoomsOizOAdFlqyTB1vGRtOFELLuL6qhOXe+6x7Xnhp3sbLLGOykxRKhPjp9E1lb2W4E0gqdgxwIKWgVUN1deaWiB7HGPxfdU4oSYI9GnMjXj5+anTUT9idEf99zOXi0D+EDcZlzqxDZ+YannmizxFHK4CT6hJO04xi3qju4fGs3FkIhkMUR/I+swfIfROA1s7K6u4U4K6NMRdJfL/gJvhBN8CI4Q/cqj4PawAiFnkT6MtUdbTeawkK8VC1YH2UDRyfI8xqGFeY90DUIYFWCjo+mT/GLZT3Z2qxnPycrKhKKTGObJG3wa2LqIou1GoAyWGNwR9k44MS/gHusppIVv2S480uiZxRW4I5yn1SWlMmcD/lkVRseRNViOz2/w46qS8e36aqUNWlwTQKH0Gf+u2ocqVIHiDb90=
  - secure: DCeWiPrdS8HO7f/zN6swSFI6Iaph7moEXTV2M5c2Vng2fmE1cjPauFJWXg/J7Ui4bumr1bPIJdwxxZU4t1KLp2jksmDBQ2MBs0cDk0hgP+6z6/4JUO0W16XSM4bpdrrk3gh8fQqL/2CHDKve1tk0/dKlRCidk9zxwaSYXR5quX4rxANZTrJ5WpaEGrt35Xf3pWQCZihfjmzd9cvAnd9A21U7FF/YatGlHN4cLwPN3ev00YWaSYPeTpVK+8nq599+8NVMUKTcpwwJfWQ6ww9kIYhs54uaBABlWo/BfRxSKZGu/pAwsZpH7eW4nxXqWYk/Nh9OSenl/UOnkq0Sr6uCRyGEh0MJrNRwgX3GvmK+D7HSpXhojnJ/+w2/w8ak0pbN88g+f/ZKQr+F/F51HVqK5mECk3fcd4LB3teAku6+XC4K+iM9Qisjj/yvRJqY6KsHDeeFqiTiWF/DlSViJI8n04LzrhdOq1K1/QevUFuOUK/INa1pgvpHWXfvZEq0rw8EjV8OObYpg+mjgYPYkAS6MWgeDStLxOav+yNYK55FnpMHU1u0OCNPVCKOaBzvT27g181Q6Y/vdeq2P6/yucA+R9qYnh7i47j6qdJWEfC911/EbYI6KhJ+/dsLpzZnvk1cKsSGeKnZr/6bXOhyzegICmbD704bXanrBAifDIzPkmU=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=chapter10-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=54.215.193.139
- export PLATFORM_TEST_NAME="chapter10-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
